# 機能要件定義書

## 1. 本資料の目的
本資料は、部活動向け業務支援システムにおいて  
**実装対象とする機能要件を明確化し、設計および実装の指針とすること**を目的とする。

本資料は、システム概要資料に基づき、  
「何を実装するか」「何を実装しないか」を明確に定義する。

---

## 2. システム概要（機能観点）
本システムは、部活動における欠席連絡や試合結果報告を、  
口頭やチャットによる「連絡」ではなく、  
**申請 → 承認 → 証跡** として管理する業務支援システムである。

顧問の確認負担を軽減するとともに、  
判断および責任の所在を明確にすることを目的とする。

---

## 3. 対象ユーザー・ロール
| ロール | 概要 |
|---|---|
| 生徒 | 申請・報告の作成、結果確認、練習スケジュール閲覧 |
| 監督・コーチ（顧問） | 申請・報告の承認、練習スケジュール管理 |
| 管理者 | 部活・メンバー管理、ログ閲覧（最小） |

---

## 4. 提供機能一覧
- A. 欠席系 申請・承認管理（コア機能）
- B. 試合結果報告 申請・承認管理
- C. 練習スケジュール共有

---

## 5. 機能要件詳細

---

## A. 欠席系 申請・承認管理

### A-1. 機能概要
部活動への **欠席／遅刻／早退／不参加** を、  
生徒が申請し、監督・コーチが承認する仕組みを提供する。

申請・承認の履歴は **証跡として保存** され、後から確認可能とする。

---

### A-2. 対象申請種別
- 欠席
- 遅刻
- 早退
- 不参加

---

### A-3. 基本フロー
1. 生徒が申請を作成（下書き）
2. 生徒が申請を提出
3. 監督・コーチが以下のいずれかを実施
   - 承認
   - 差し戻し
   - 却下
4. 処理結果を申請者が確認

---

### A-4. 入力項目
| 項目 | 必須 | 備考 |
|---|---|---|
| 対象日 | ○ | |
| 申請種別 | ○ | 欠席／遅刻／早退／不参加 |
| 理由 | ○ | テキスト入力 |

---

### A-5. 状態管理
申請は以下の状態を持つ。

- DRAFT（下書き）
- SUBMITTED（提出済み）
- RETURNED（差し戻し）
- APPROVED（承認）
- REJECTED（却下）
- CANCELLED（取消）

---

### A-6. 操作ルール
- 生徒は `DRAFT` / `RETURNED` 状態のみ編集可能
- `SUBMITTED` 状態は取消のみ可能
- 承認・差し戻し・却下は監督・コーチのみ可能
- `APPROVED` / `REJECTED` 状態は閲覧のみ

---

### A-7. 証跡管理
以下の情報を証跡として保存する。

- 操作種別（提出／承認／差し戻し／却下／取消）
- 操作者
- 操作日時
- コメント（差し戻し理由 等）

---

## B. 試合結果報告 申請・承認管理

### B-1. 機能概要
試合結果を報告として申請し、  
監督・コーチの承認後に **部の公式記録として確定** する仕組みを提供する。

---

### B-2. 基本フロー
1. 生徒が試合結果を作成（下書き）
2. 生徒が報告を提出
3. 監督・コーチが承認／差し戻し／却下
4. 承認済みデータを公式記録として扱う

---

### B-3. 入力項目
| 項目 | 必須 | 備考 |
|---|---|---|
| 試合日 | ○ | |
| 対戦相手 | ○ | |
| スコア | ○ | 文字列（例：6-4, 3-6, 10-8） |
| 勝敗 | ○ | 勝／負／分 |
| コメント | 任意 | |

---

### B-4. 状態管理
状態は **欠席系申請と同一の状態定義を使用** する。

---

### B-5. 業務ルール
- 承認前の試合結果は参考情報として扱う
- 承認後の試合結果のみを公式記録とする
- 修正が必要な場合は再申請とする

---

## C. 練習スケジュール共有

### C-1. 機能概要
監督・コーチが練習スケジュールを登録し、  
生徒が閲覧できる **公式な練習予定情報** を提供する。

本機能には申請・承認フローは設けない。

---

### C-2. 操作権限
| ロール | 操作 |
|---|---|
| 生徒 | 閲覧のみ |
| 監督・コーチ | 登録／編集／削除 |
| 管理者 | 管理（最小） |

---

### C-3. 入力項目
| 項目 | 必須 | 備考 |
|---|---|---|
| 日付 | ○ | |
| 開始時刻 | 任意 | |
| 終了時刻 | 任意 | |
| 場所 | ○ | |
| 内容・メニュー | 任意 | |
| 備考 | 任意 | |

---

## 6. 共通仕様

### 6-1. 認証・認可
- ロールベースアクセス制御を行う
- データは部活動単位で分離する

---

### 6-2. 監査ログ
以下の操作を監査ログとして保存する。

- 申請提出
- 承認
- 差し戻し
- 却下
- 申請取消

---

## 7. 補足
本資料に記載の機能要件を前提として、  
画面遷移、状態遷移、API仕様、DB設計、インフラ構成を  
後続の基本設計資料にて定義する。
